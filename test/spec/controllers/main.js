'use strict';

describe('MainCtrl', function () {
	
	// load the controller's module
	beforeEach(function(){
		module('liftopiaTestApp', 'firebase');
	});

	var MainCtrl, scope, httpBackend;

	// Initialize the controller and a mock scope
	beforeEach(inject(function($rootScope, $controller, $http, $firebase, $q, $httpBackend){
		
		httpBackend = $httpBackend;
		scope = $rootScope.$new();

		MainCtrl = $controller('MainCtrl', {
			$scope: scope,
			$http: $http,
			$firebase: $firebase,
			$q: $q
		});
	}));
	
	it('The ajax calls must return ', function () {
		//arrange
		httpBackend.whenJSONP('http://api.worldweatheronline.com/free/v1/ski.ashx?q=95735&format=json&key=84h5ebdy44vcpqkxck8sgquc&callback=JSON_CALLBACK')
		.respond({ "data": { "request": [ {"query": "95735", "type": "Zipcode" } ],  "weather": [ { "bottom": [ {"maxtempC": "6", "maxtempF": "42", "mintempC": "-4", "mintempF": "25" } ], "chanceofsnow": "99", "date": "2014-02-10",  "hourly": [ { "bottom": [ {"tempC": "2", "tempF": "35", "weatherCode": "332",  "weatherDesc": [ {"value": "Moderate snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0036_cloudy_with_heavy_snow_night.png" } ], "winddir16Point": "SW", "winddirDegree": "223", "windspeedKmph": "13", "windspeedMiles": "8" } ],  "mid": [ {"tempC": "0", "tempF": "31", "weatherCode": "332",  "weatherDesc": [ {"value": "Moderate snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0036_cloudy_with_heavy_snow_night.png" } ], "winddir16Point": "WSW", "winddirDegree": "237", "windspeedKmph": "36", "windspeedMiles": "22" } ], "time": "200",  "top": [ {"tempC": "-2", "tempF": "28", "weatherCode": "332",  "weatherDesc": [ {"value": "Moderate snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0036_cloudy_with_heavy_snow_night.png" } ], "winddir16Point": "WSW", "winddirDegree": "237", "windspeedKmph": "46", "windspeedMiles": "29" } ] }, { "bottom": [ {"tempC": "1", "tempF": "33", "weatherCode": "332",  "weatherDesc": [ {"value": "Moderate snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0036_cloudy_with_heavy_snow_night.png" } ], "winddir16Point": "SW", "winddirDegree": "227", "windspeedKmph": "12", "windspeedMiles": "7" } ],  "mid": [ {"tempC": "-1", "tempF": "31", "weatherCode": "332",  "weatherDesc": [ {"value": "Moderate snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0036_cloudy_with_heavy_snow_night.png" } ], "winddir16Point": "WSW", "winddirDegree": "246", "windspeedKmph": "29", "windspeedMiles": "18" } ], "time": "500",  "top": [ {"tempC": "-3", "tempF": "27", "weatherCode": "332",  "weatherDesc": [ {"value": "Moderate snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0036_cloudy_with_heavy_snow_night.png" } ], "winddir16Point": "WSW", "winddirDegree": "246", "windspeedKmph": "37", "windspeedMiles": "23" } ] }, { "bottom": [ {"tempC": "1", "tempF": "33", "weatherCode": "326",  "weatherDesc": [ {"value": "Light snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0011_light_snow_showers.png" } ], "winddir16Point": "SW", "winddirDegree": "231", "windspeedKmph": "6", "windspeedMiles": "4" } ],  "mid": [ {"tempC": "-1", "tempF": "30", "weatherCode": "326",  "weatherDesc": [ {"value": "Light snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0011_light_snow_showers.png" } ], "winddir16Point": "W", "winddirDegree": "265", "windspeedKmph": "14", "windspeedMiles": "9" } ], "time": "800",  "top": [ {"tempC": "-3", "tempF": "27", "weatherCode": "326",  "weatherDesc": [ {"value": "Light snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0011_light_snow_showers.png" } ], "winddir16Point": "W", "winddirDegree": "265", "windspeedKmph": "20", "windspeedMiles": "12" } ] }, { "bottom": [ {"tempC": "3", "tempF": "38", "weatherCode": "323",  "weatherDesc": [ {"value": "Patchy light snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0011_light_snow_showers.png" } ], "winddir16Point": "WSW", "winddirDegree": "256", "windspeedKmph": "6", "windspeedMiles": "4" } ],  "mid": [ {"tempC": "-1", "tempF": "31", "weatherCode": "323",  "weatherDesc": [ {"value": "Patchy light snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0011_light_snow_showers.png" } ], "winddir16Point": "W", "winddirDegree": "279", "windspeedKmph": "8", "windspeedMiles": "5" } ], "time": "1100",  "top": [ {"tempC": "-3", "tempF": "27", "weatherCode": "323",  "weatherDesc": [ {"value": "Patchy light snow" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0011_light_snow_showers.png" } ], "winddir16Point": "W", "winddirDegree": "279", "windspeedKmph": "10", "windspeedMiles": "6" } ] }, { "bottom": [ {"tempC": "5", "tempF": "42", "weatherCode": "113",  "weatherDesc": [ {"value": "Sunny" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], "winddir16Point": "WNW", "winddirDegree": "291", "windspeedKmph": "5", "windspeedMiles": "3" } ],  "mid": [ {"tempC": "1", "tempF": "33", "weatherCode": "113",  "weatherDesc": [ {"value": "Sunny" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], "winddir16Point": "NW", "winddirDegree": "324", "windspeedKmph": "6", "windspeedMiles": "4" } ], "time": "1400",  "top": [ {"tempC": "-2", "tempF": "29", "weatherCode": "113",  "weatherDesc": [ {"value": "Sunny" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], "winddir16Point": "NW", "winddirDegree": "324", "windspeedKmph": "9", "windspeedMiles": "6" } ] }, { "bottom": [ {"tempC": "6", "tempF": "42", "weatherCode": "113",  "weatherDesc": [ {"value": "Sunny" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], "winddir16Point": "N", "winddirDegree": "355", "windspeedKmph": "4", "windspeedMiles": "2" } ],  "mid": [ {"tempC": "2", "tempF": "35", "weatherCode": "113",  "weatherDesc": [ {"value": "Sunny" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], "winddir16Point": "NNE", "winddirDegree": "19", "windspeedKmph": "8", "windspeedMiles": "5" } ], "time": "1700",  "top": [ {"tempC": "-1", "tempF": "31", "weatherCode": "113",  "weatherDesc": [ {"value": "Sunny" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png" } ], "winddir16Point": "NNE", "winddirDegree": "19", "windspeedKmph": "11", "windspeedMiles": "7" } ] }, { "bottom": [ {"tempC": "-2", "tempF": "28", "weatherCode": "113",  "weatherDesc": [ {"value": "Clear" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0008_clear_sky_night.png" } ], "winddir16Point": "ENE", "winddirDegree": "66", "windspeedKmph": "6", "windspeedMiles": "4" } ],  "mid": [ {"tempC": "2", "tempF": "35", "weatherCode": "113",  "weatherDesc": [ {"value": "Clear" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0008_clear_sky_night.png" } ], "winddir16Point": "ENE", "winddirDegree": "57", "windspeedKmph": "8", "windspeedMiles": "5" } ], "time": "2000",  "top": [ {"tempC": "0", "tempF": "32", "weatherCode": "113",  "weatherDesc": [ {"value": "Clear" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0008_clear_sky_night.png" } ], "winddir16Point": "ENE", "winddirDegree": "57", "windspeedKmph": "8", "windspeedMiles": "5" } ] }, { "bottom": [ {"tempC": "-2", "tempF": "29", "weatherCode": "113",  "weatherDesc": [ {"value": "Clear" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0008_clear_sky_night.png" } ], "winddir16Point": "ESE", "winddirDegree": "110", "windspeedKmph": "6", "windspeedMiles": "4" } ],  "mid": [ {"tempC": "2", "tempF": "35", "weatherCode": "113",  "weatherDesc": [ {"value": "Clear" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0008_clear_sky_night.png" } ], "winddir16Point": "SSW", "winddirDegree": "214", "windspeedKmph": "2", "windspeedMiles": "1" } ], "time": "2300",  "top": [ {"tempC": "0", "tempF": "33", "weatherCode": "113",  "weatherDesc": [ {"value": "Clear" } ],  "weatherIconUrl": [ {"value": "http:\/\/cdn.worldweatheronline.net\/images\/wsymbols01_png_64\/wsymbol_0008_clear_sky_night.png" } ], "winddir16Point": "SSW", "winddirDegree": "214", "windspeedKmph": "4", "windspeedMiles": "3" } ] } ],  "mid": [ {"maxtempC": "2", "maxtempF": "35", "mintempC": "2", "mintempF": "35" } ],  "top": [ {"maxtempC": "-1", "maxtempF": "31", "mintempC": "-2", "mintempF": "28" } ], "totalSnowfall_cm": "3.5" } ] }});

		httpBackend.whenJSONP('http://api.yelp.com/business_review_search?term=ski+stores&location=95735&limit=3&ywsid=HfHf5kE34o71u3IMpcG7PA&callback=JSON_CALLBACK')
		.respond({"message": {"text": "OK", "code": 0, "version": "1.1.1"}, "businesses": [{"rating_img_url": "http://s3-media4.ak.yelpcdn.com/assets/2/www/img/c2f3dd9799a5/ico/stars/v1/stars_4.png", "country_code": "US", "id": "aTaIo8CpgtPlZxtZmE9ZPQ", "is_closed": false, "city": "Twin Bridges", "mobile_url": "http://m.yelp.com/biz/sierra-at-tahoe-twin-bridges-3", "review_count": 333, "zip": "95735", "state": "CA", "latitude": 38.798087060498801, "rating_img_url_small": "http://s3-media4.ak.yelpcdn.com/assets/2/www/img/f62a5be2f902/ico/stars/v1/stars_small_4.png", "address1": "1111 Sierra-At-Tahoe Rd", "address2": "", "address3": "", "phone": "5306597453", "state_code": "CA", "categories": [{"category_filter": "skiresorts", "search_url": "http://www.yelp.com/search?cflt=skiresorts\u0026find_desc=\u0026find_loc=1111+Sierra-At-Tahoe+Rd%2C+Twin+Bridges+95735", "name": "Ski Resorts"}], "photo_url": "http://media3.ak.yelpcdn.com/bpthumb/53NQIS1CKxDZV6EZ_TTC5A/ms", "distance": 3.2343451976776123, "name": "Sierra-at-Tahoe", "neighborhoods": [], "url": "http://www.yelp.com/biz/sierra-at-tahoe-twin-bridges-3", "country": "USA", "avg_rating": 4.0, "longitude": -120.091562884467, "nearby_url": "http://www.yelp.com/search?find_desc=\u0026find_loc=1111+Sierra-At-Tahoe+Rd%2C+Twin+Bridges+95735", "reviews": [{"rating_img_url_small": "http://s3-media4.ak.yelpcdn.com/assets/2/www/img/f62a5be2f902/ico/stars/v1/stars_small_4.png", "user_photo_url_small": "http://media1.ak.yelpcdn.com/upthumb/d4mhCSbwig25q-9KjyZdhQ/ss", "rating_img_url": "http://s3-media4.ak.yelpcdn.com/assets/2/www/img/c2f3dd9799a5/ico/stars/v1/stars_4.png", "rating": 4, "user_url": "http://www.yelp.com/user_details?userid=P5yY5TtbqyhWKz4_rzbiBg", "url": "http://www.yelp.com/biz/sierra-at-tahoe-twin-bridges-3#hrid:mcYtvTGhWTw8lFDufozxQg", "mobile_uri": "/biz/sierra-at-tahoe-twin-bridges-3?full=True#hrid:mcYtvTGhWTw8lFDufozxQg", "text_excerpt": "I came here to go snowboarding one weekend. I really like the main run down the mountain at this resort. Sugar n'spice is pretty lengthy and not very...", "user_photo_url": "http://media1.ak.yelpcdn.com/upthumb/d4mhCSbwig25q-9KjyZdhQ/ms", "date": "2014-02-05", "user_name": "Benjamin L.", "id": "mcYtvTGhWTw8lFDufozxQg"}, {"rating_img_url_small": "http://s3-media4.ak.yelpcdn.com/assets/2/www/img/f62a5be2f902/ico/stars/v1/stars_small_4.png", "user_photo_url_small": "http://media1.ak.yelpcdn.com/upthumb/JXZOLO7BnflAD07M4TAxcQ/ss", "rating_img_url": "http://s3-media4.ak.yelpcdn.com/assets/2/www/img/c2f3dd9799a5/ico/stars/v1/stars_4.png", "rating": 4, "user_url": "http://www.yelp.com/user_details?userid=MTWvX5bTWXdF2sB4P5AVoQ", "url": "http://www.yelp.com/biz/sierra-at-tahoe-twin-bridges-3#hrid:-4CLDwvb0KITBay1iAEMRQ", "mobile_uri": "/biz/sierra-at-tahoe-twin-bridges-3?full=True#hrid:-4CLDwvb0KITBay1iAEMRQ", "text_excerpt": "It's a four because staff is so nice and helpful! If your new, bunny slope is decent, it's long, but not too steep. \n\nI hate having to pull my pass out to...", "user_photo_url": "http://media1.ak.yelpcdn.com/upthumb/JXZOLO7BnflAD07M4TAxcQ/ms", "date": "2014-01-13", "user_name": "Jade L.", "id": "-4CLDwvb0KITBay1iAEMRQ"}, {"rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png", "user_photo_url_small": "http://media1.ak.yelpcdn.com/upthumb/OdAt2uMcHwd80__D987rTQ/ss", "rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png", "rating": 5, "user_url": "http://www.yelp.com/user_details?userid=my36mJlxoSwNoA_rgLkLAQ", "url": "http://www.yelp.com/biz/sierra-at-tahoe-twin-bridges-3#hrid:UTPJkcIIxGlFd8b__b8kDg", "mobile_uri": "/biz/sierra-at-tahoe-twin-bridges-3?full=True#hrid:UTPJkcIIxGlFd8b__b8kDg", "text_excerpt": "I have been coming here for years. I love Sierra! \n\nThis is one of the Snow resorts where there is something for everyone! \nThe runs are long and depending...", "user_photo_url": "http://media1.ak.yelpcdn.com/upthumb/OdAt2uMcHwd80__D987rTQ/ms", "date": "2013-10-14", "user_name": "Marie P.", "id": "UTPJkcIIxGlFd8b__b8kDg"}], "photo_url_small": "http://media3.ak.yelpcdn.com/bpthumb/53NQIS1CKxDZV6EZ_TTC5A/ss"}, {"rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png", "country_code": "US", "id": "ckJ1Rl_BYkM_lXfYYoOYQQ", "is_closed": false, "city": "South Lake Tahoe", "mobile_url": "http://m.yelp.com/biz/ski-renter-the-south-lake-tahoe", "review_count": 8, "zip": "96150", "state": "CA", "latitude": 38.945990000000002, "rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png", "address1": "1093 Ski Run Blvd", "address2": "", "address3": "", "phone": "5305442100", "state_code": "CA", "categories": [{"category_filter": "sportgoods", "search_url": "http://www.yelp.com/search?cflt=sportgoods\u0026find_desc=\u0026find_loc=1093+Ski+Run+Blvd%2C+South+Lake+Tahoe+96150", "name": "Sporting Goods"}], "photo_url": "http://media3.ak.yelpcdn.com/bpthumb/MbRwBoL5D-PiEVpXoOICQA/ms", "distance": 13.720486640930176, "name": "Ski Renter the", "neighborhoods": [], "url": "http://www.yelp.com/biz/ski-renter-the-south-lake-tahoe", "country": "USA", "avg_rating": 5.0, "longitude": -119.955271, "nearby_url": "http://www.yelp.com/search?find_desc=\u0026find_loc=1093+Ski+Run+Blvd%2C+South+Lake+Tahoe+96150", "reviews": [{"rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png", "user_photo_url_small": "http://media1.ak.yelpcdn.com/upthumb/xD41kih9uXVrzFqziFEDEQ/ss", "rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png", "rating": 5, "user_url": "http://www.yelp.com/user_details?userid=vtvG8PADc8esaLG8PYs-aQ", "url": "http://www.yelp.com/biz/ski-renter-the-south-lake-tahoe#hrid:4_DBFLHTXqYSEpLKaKyCpA", "mobile_uri": "/biz/ski-renter-the-south-lake-tahoe?full=True#hrid:4_DBFLHTXqYSEpLKaKyCpA", "text_excerpt": "Best place to rent skis in Tahoe!!!!  Incredibly friendly staff...Phil is awesome!!!  Best prices in town!! Phil is extremely knowledgeable of the Tahoe...", "user_photo_url": "http://media1.ak.yelpcdn.com/upthumb/xD41kih9uXVrzFqziFEDEQ/ms", "date": "2013-12-14", "user_name": "Sarah H.", "id": "4_DBFLHTXqYSEpLKaKyCpA"}, {"rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png", "user_photo_url_small": "http://media1.ak.yelpcdn.com/upthumb/JIeiT_g_ubwv_-NHeOAnxQ/ss", "rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png", "rating": 5, "user_url": "http://www.yelp.com/user_details?userid=W9i-vBoMHtWLpLhRvlrBEw", "url": "http://www.yelp.com/biz/ski-renter-the-south-lake-tahoe#hrid:FZG2wyWKkcopPLA2luqf1w", "mobile_uri": "/biz/ski-renter-the-south-lake-tahoe?full=True#hrid:FZG2wyWKkcopPLA2luqf1w", "text_excerpt": "Went here for the first time with my kids and met Pete.  My son needed a snowboard/boots rental while my daughter needed a pair of ski poles.  Pete was very...", "user_photo_url": "http://media1.ak.yelpcdn.com/upthumb/JIeiT_g_ubwv_-NHeOAnxQ/ms", "date": "2013-02-19", "user_name": "Bread S.", "id": "FZG2wyWKkcopPLA2luqf1w"}, {"rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png", "user_photo_url_small": "http://media1.ak.yelpcdn.com/upthumb/8uF0L2NDRMsmRh_1C3JBYg/ss", "rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png", "rating": 5, "user_url": "http://www.yelp.com/user_details?userid=luDCOyOaoNy8ZBY5UHqe4g", "url": "http://www.yelp.com/biz/ski-renter-the-south-lake-tahoe#hrid:1oe3dkuw3k5NA4B7UOfH0w", "mobile_uri": "/biz/ski-renter-the-south-lake-tahoe?full=True#hrid:1oe3dkuw3k5NA4B7UOfH0w", "text_excerpt": "For over 10 years, we've been renting the cabin a few doors down from the Ski Renter.  Every time we need something, this place is our go-to spot.  Quality...", "user_photo_url": "http://media1.ak.yelpcdn.com/upthumb/8uF0L2NDRMsmRh_1C3JBYg/ms", "date": "2011-01-04", "user_name": "Melody P.", "id": "1oe3dkuw3k5NA4B7UOfH0w"}], "photo_url_small": "http://media3.ak.yelpcdn.com/bpthumb/MbRwBoL5D-PiEVpXoOICQA/ss"}, {"rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png", "country_code": "US", "id": "NAE6UqSreelT3N8seZzW7Q", "is_closed": false, "city": "South Lake Tahoe", "mobile_url": "http://m.yelp.com/biz/south-shore-snow-south-lake-tahoe-2", "review_count": 10, "zip": "96150", "state": "CA", "latitude": 38.913787399999997, "rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png", "address1": "955 Emerald Bay Rd", "address2": "", "address3": "", "phone": "5305447433", "state_code": "CA", "categories": [{"category_filter": "outdoorgear", "search_url": "http://www.yelp.com/search?cflt=outdoorgear\u0026find_desc=\u0026find_loc=955+Emerald+Bay+Rd%2C+South+Lake+Tahoe+96150", "name": "Outdoor Gear"}, {"category_filter": "sportswear", "search_url": "http://www.yelp.com/search?cflt=sportswear\u0026find_desc=\u0026find_loc=955+Emerald+Bay+Rd%2C+South+Lake+Tahoe+96150", "name": "Sports Wear"}], "photo_url": "http://media2.ak.yelpcdn.com/bpthumb/k2Zj41p2xItEPCgejPfOsg/ms", "distance": 10.251138687133789, "name": "South Shore Snow", "neighborhoods": [], "url": "http://www.yelp.com/biz/south-shore-snow-south-lake-tahoe-2", "country": "USA", "avg_rating": 5.0, "longitude": -120.0048094, "nearby_url": "http://www.yelp.com/search?find_desc=\u0026find_loc=955+Emerald+Bay+Rd%2C+South+Lake+Tahoe+96150", "reviews": [{"rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png", "user_photo_url_small": "http://media1.ak.yelpcdn.com/upthumb/X6uX819zU2iLembvv98v-w/ss", "rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png", "rating": 5, "user_url": "http://www.yelp.com/user_details?userid=RgQtsk0fPT0uYxPR4rdDQQ", "url": "http://www.yelp.com/biz/south-shore-snow-south-lake-tahoe-2#hrid:BpN6-9FtlZCZaJ-U-SWIGQ", "mobile_uri": "/biz/south-shore-snow-south-lake-tahoe-2?full=True#hrid:BpN6-9FtlZCZaJ-U-SWIGQ", "text_excerpt": "Stopped in and 1 hour later was back and they had my ski's tuned up and ready to go.  They examined them and knew just what they needed no more no less....", "user_photo_url": "http://media1.ak.yelpcdn.com/upthumb/X6uX819zU2iLembvv98v-w/ms", "date": "2013-07-05", "user_name": "Dave S.", "id": "BpN6-9FtlZCZaJ-U-SWIGQ"}, {"rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png", "user_photo_url_small": "http://media1.ak.yelpcdn.com/upthumb/FaGeZ184BMY4xbw3LJAgzQ/ss", "rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png", "rating": 5, "user_url": "http://www.yelp.com/user_details?userid=lgQALXdHVgD8Dx6xXzoXvg", "url": "http://www.yelp.com/biz/south-shore-snow-south-lake-tahoe-2#hrid:evQQJ_BPmglSOunzVRDwpg", "mobile_uri": "/biz/south-shore-snow-south-lake-tahoe-2?full=True#hrid:evQQJ_BPmglSOunzVRDwpg", "text_excerpt": "South Shore Snow is the best snow shop around!  Owned and operated by the one and only mogul skier Chris Hernandez, former US ski team member. \n\nThey have a...", "user_photo_url": "http://media1.ak.yelpcdn.com/upthumb/FaGeZ184BMY4xbw3LJAgzQ/ms", "date": "2011-01-13", "user_name": "Christine W.", "id": "evQQJ_BPmglSOunzVRDwpg"}, {"rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png", "user_photo_url_small": "http://media1.ak.yelpcdn.com/upthumb/ydD_ZKL_3NwF1WHRfQnlZg/ss", "rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png", "rating": 5, "user_url": "http://www.yelp.com/user_details?userid=u15HNdq8ChFLOz2FB6B6ig", "url": "http://www.yelp.com/biz/south-shore-snow-south-lake-tahoe-2#hrid:UcYQkSKJmFHrYjUSav5BcQ", "mobile_uri": "/biz/south-shore-snow-south-lake-tahoe-2?full=True#hrid:UcYQkSKJmFHrYjUSav5BcQ", "text_excerpt": "This is now THE spot in South Lake to rent your ski or snowboard gear.  They just started it this winter, so all the gear is brand new, yet somehow the...", "user_photo_url": "http://media1.ak.yelpcdn.com/upthumb/ydD_ZKL_3NwF1WHRfQnlZg/ms", "date": "2012-02-08", "user_name": "Joe S.", "id": "UcYQkSKJmFHrYjUSav5BcQ"}], "photo_url_small": "http://media2.ak.yelpcdn.com/bpthumb/k2Zj41p2xItEPCgejPfOsg/ss"}]});
		
		httpBackend.whenJSONP('http://ws.geonames.org/astergdemJSON?lat=38.761711&lng=-120.11554&username=nerdylocks&callback=JSON_CALLBACK')
		.respond({
			astergdem:2126,
			lng:-120.11554,
			lat:38.761711
		});

		//actions
		scope.makeCalls();
		httpBackend.flush();

		//assertions
		expect(scope.tahoeData.location).toEqual(scope.skiLocation.zip.toString()); //test weather zipcode as weather will vary
		expect(scope.tahoeData.stores.length).toEqual(3); //test # stores returned
		expect(scope.tahoeData.elevation).toEqual(2126); //test elevation
		expect(scope.snapshotCount).toEqual(scope.snapshotCount++); //Test is if data has been entered

	});

});
